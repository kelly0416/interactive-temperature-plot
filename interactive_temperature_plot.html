<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>Interactive Temperature Plot</h2>
    <label for="year">Select Year:</label>
    <input type="range" id="year-slider" min="1950" max="2021" step="1" value="1950" oninput="updatePlot(this.value)">
    <span id="year-value">1950</span>
    
    <div id="plot-container">
        <div>                        
            <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
            <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.0.min.js"></script>
            <div id="12727ce7-d3a9-4633-b3b7-6adaf3b77a59" class="plotly-graph-div" style="height:100%; width:100%;"></div>            
            <script type="text/javascript">
                window.PLOTLYENV=window.PLOTLYENV || {};                                
                if (document.getElementById("12727ce7-d3a9-4633-b3b7-6adaf3b77a59")) {
                    Plotly.newPlot(
                        "12727ce7-d3a9-4633-b3b7-6adaf3b77a59",
                        [{"hovertemplate":"Month=%{x}\u003cbr\u003eAvg Temperature (\u00b0F)=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"","orientation":"v","showlegend":false,"x":{"dtype":"i4","bdata":"AQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAA"},"xaxis":"x","y":{"dtype":"f8","bdata":"Wv00XUT\u002fQ0DPbtyjudY\u002fQKCr23TiuEFAlVFDwMawR0C01WFYg9VMQJSjSt5Kb1FA3L2PxIiVUkD2f8GPJ\u002f5RQOJymqog1U9AwHXS2bPmTEAtcVZETbZHQEMO8m9rSUFA"},"yaxis":"y","type":"scatter"}],
                        {"template":{"data":{"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}]},"layout":{"title":{"text":"Average Monthly Temperature in 1950"}}}},
                        {"responsive": true}                    
                    );
                };
            </script>        
        </div>
    </div>

    <script>
        function updatePlot(year) {
            document.getElementById("year-value").innerText = year;
            fetch(`plots/temperature_plot_${year}.html`)  // <-- Updated path to "plots/" folder
                .then(response => response.text())
                .then(html => {
                    document.getElementById("plot-container").innerHTML = html;
                })
                .catch(error => console.log("File not found: ", error));
        }
    </script>
</body>
</html>
